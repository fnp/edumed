{% extends "base_mil.html" %}
{% load chunks %}

{% block title %}Katalog kompetencji medialnych i informacyjnych{% endblock %}

{% block body %}
<h1>Katalog kompetencji medialnych i informacyjnych</h1>

{% chunk 'katalog_kompetencji' %}

<div class="curriculum-form">
<h2><a>Przeglądaj kompetencje <span>(rozwiń)</span></a></h2>
<form>

<h3>Poziom edukacyjny:</h3>
{% if errors.level %}<p class="error">{{ errors.level }}</p>{% endif %}
{% for lev_group, levels in levels.items %}
    <strong>{{ lev_group }}</strong>
    <ul class="curriculum-levels">
    {% for lev in levels %}
    <li><label><input type="radio" name="level" value="{{ lev.slug }}"
        {% if lev == level %}checked="checked"{% endif %} />
        {{ lev }}</label></li>
    {% endfor %}
    </ul>
{% endfor %}

<h3>Kategorie kompetencji:</h3>
{% if errors.competences %}<p class="error">{{ errors.competences }}</p>{% endif %}
<ul class="curriculum-sections">
{% for section in sections %}
    <li class="curriculum-section">
    <label><input type="checkbox" class="s" name="s" value="{{ section.pk }}"
        {% if section.pk in sect_ids %}checked="checked"{% endif %} /> {{ section }}</label>
        <a class="curriculum-section-toggler">(rozwiń)</a>
    <ul class="competences">
    {% for competence in section.competence_set.all %}
        <li class="competence"><label><input class="c" type="checkbox" name="c" value="{{ competence.pk }}"
            {% if competence.pk in comp_ids %}checked="checked"{% endif %} />
            {{ competence }}</label></li>
    {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul>
<button>Pokaż</button>
</form>
</div>

{% if chosen_competences %}

<h2>Wybrane kompetencje – {{ level }}</h2>

{% for section, competences in chosen_competences.items %}
    <h3>{{ section }}</h3>
    {% for competence in competences %}
        <h4>{{ competence }}</h4>
        {{ competence.for_level_.description|linebreaksbr }}
    {% endfor %}
{% endfor %}

{% endif %}


{% if request.GET.d %}
<script type="text/javascript">
    var curriculum_hide_form = true;
</script>
{% endif %}
{% endblock %}
